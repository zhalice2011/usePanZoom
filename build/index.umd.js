!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("react")):"function"==typeof define&&define.amd?define(["react"],n):(e=e||self).gdUsePanAndZoom=n(e.react)}(this,(function(e){function n(){return(n=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var t,r=function(e,n){return function(t){return Math.max(e,Math.min(t,n))}},o=function(e){return e},u=function(){},i=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce((function(e,n){return function(){return e(n.apply(void 0,arguments))}}))},c=function(e,n){return function(t){return null==t?e():n(t)}},a=c((function(){return{left:0,top:0}}),i((function(e){var n=e[0],t=e[1];return{left:t.left+n.offsetLeft,top:t.top+n.offsetTop}}),(t=function(e){return a(e.offsetParent)},function(e){return[e[0],t(e[1])]}),(function(e){return[e,e]}))),f=i((function(e){var n=e.left,t=e.top;return function(e,r){return{x:e-n,y:r-t}}}),a),s=function(n){var t=e.useRef(n);return[e.useCallback((function(){return t.current}),[]),e.useCallback((function(e){return t.current="function"==typeof e?e(t.current):e,t.current}),[])]};return function(t){var i,a=t.enablePan,l=void 0===a||a,v=t.enableZoom,d=void 0===v||v,p=t.requireCtrlToZoom,m=void 0!==p&&p,y=t.panOnDrag,g=void 0===y||y,x=t.preventClickOnPan,h=void 0===x||x,b=t.zoomSensitivity,C=void 0===b?.01:b,E=t.scrollPanSensitivity,k=void 0===E?1:E,L=t.minZoom,P=void 0===L?0:L,z=t.maxZoom,M=void 0===z?Infinity:z,Y=t.minX,X=void 0===Y?-Infinity:Y,Z=t.maxX,w=void 0===Z?Infinity:Z,O=t.minY,D=void 0===O?-Infinity:O,S=t.maxY,T=void 0===S?Infinity:S,j=t.initialZoom,I=void 0===j?1:j,R=t.initialPan,H=void 0===R?{x:0,y:0}:R,q=t.onPanStart,A=void 0===q?u:q,U=t.onPan,W=void 0===U?u:U,K=t.onPanEnd,B=void 0===K?u:K,F=t.onZoom,G=void 0===F?u:F,J=e.useRef(null),N=(i=e.useState(Object.create(null))[1],e.useCallback((function(){i(Object.create(null))}),[i])),Q=e.useRef(!1),V=e.useRef([]),$=e.useRef(1),_=s({top:0,left:0}),ee=_[0],ne=_[1],te=s(!1),re=te[0],oe=te[1],ue=s(n({},H,{zoom:I})),ie=ue[0],ce=ue[1],ae=e.useCallback(r(X,w),[X,w]),fe=e.useCallback(r(D,T),[D,T]),se=e.useCallback(r(P,M),[P,M]),le=e.useCallback((function(e){var n=ce(e),t=ie(),r=t.zoom;return ne({top:(J.current.offsetHeight/2-t.y)/r,left:(J.current.offsetWidth/2-t.x)/r}),N(),n}),[]),ve=e.useCallback((function(e){return le((function(n){var t=n.zoom,r="function"==typeof e?e({x:n.x,y:n.y}):e;return{x:ae(r.x),y:fe(r.y),zoom:t}}))}),[X,w,D,T]),de=e.useCallback((function(e,n){return le((function(t){var r=t.x,u=t.y,i=t.zoom,a=se("function"==typeof e?e(i):e),f=c((function(){return{x:J.current.offsetWidth/2,y:J.current.offsetHeight/2}}),o)(n);return{x:ae(r+(f.x-r)*(i-a)/i),y:fe(u+(f.y-u)*(i-a)/i),zoom:a}}))}),[X,w,D,T,P,M]),pe=e.useCallback((function(e){l&&(V.current=e,oe(!0),A(e))}),[l,A]),me=e.useCallback((function(e){if(re()){Q.current=!0;var n=V.current;V.current=e,ve((function(t){for(var r=t.x,o=t.y,u=0,i=0,c=Math.min(e.length,n.length),a=0;a<c;a++)u+=e[a].x-n[a].x,i+=e[a].y-n[a].y;return{x:r+u/c,y:o+i/c}})),W(e)}}),[re,W,X,w,D,T]),ye=e.useCallback((function(){re()&&(oe(!1),B())}),[B]),ge=e.useCallback((function(e){Q.current&&(Q.current=!1,e.stopPropagation())}),[h]),xe=e.useCallback((function(e){if(d&&J.current)if(e.preventDefault(),!m||e.ctrlKey){var n=e.pageX,t=e.pageY,r=e.deltaY,o=f(J.current)(n,t);de((function(e){return e*Math.pow(1-C,r)}),o),G()}else{var u=e.deltaX,i=e.deltaY;ve((function(e){return{x:e.x-u,y:e.y-i}}))}}),[d,G,X,w,D,T,P,M,k,ve]),he=e.useCallback((function(e){e.preventDefault(),$.current=ie().zoom}),[]),be=e.useCallback((function(e){e.preventDefault();var n=e.pageX,t=e.pageY,r=e.scale,o=getPositionOnElement(J.current)(n,t);de($.current*r,o),G()}),[]),Ce=e.useCallback((function(e){if(e)e.addEventListener("wheel",xe),e.addEventListener("gesturestart",he),e.addEventListener("gesturechange",be),e.addEventListener("gestureend",be);else if(J.current)return function(){J.current.removeEventListener("wheel",xe),J.current.removeEventListener("gesturestart",he),J.current.removeEventListener("gesturechange",be),J.current.removeEventListener("gestureend",be)};J.current=e}),[]);e.useEffect((function(){if(J.current)return J.current.addEventListener("wheel",xe),J.current.addEventListener("gesturestart",he),J.current.addEventListener("gesturechange",be),J.current.addEventListener("gestureend",be),function(){J.current.removeEventListener("wheel",xe),J.current.removeEventListener("gesturestart",he),J.current.removeEventListener("gesturechange",be),J.current.removeEventListener("gestureend",be)}}),[]);var Ee=ie();return{container:J,setContainer:Ce,transformStyle:"translate3D("+Ee.x+"px, "+Ee.y+"px, 0) scale("+Ee.zoom+")",transform:Ee,center:ee(),pan:{x:Ee.x,y:Ee.y},zoom:Ee.zoom,setPan:ve,setZoom:de,panZoomHandlers:g?{onTouchStart:function(e){return pe([].concat(e.touches).map((function(e){return{x:e.pageX,y:e.pageY}})))},onTouchMove:function(e){return me([].concat(e.touches).map((function(e){return{x:e.pageX,y:e.pageY}})))},onTouchEnd:function(){return ye()},onTouchCancel:function(){return ye()},onMouseDown:function(e){return pe([{x:e.pageX,y:e.pageY}])},onMouseMove:function(e){return me([{x:e.pageX,y:e.pageY}])},onMouseUp:function(){return ye()},onMouseLeave:function(){return ye()},onClickCapture:ge}:{}}}}));
//# sourceMappingURL=index.umd.js.map

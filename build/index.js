var e=require("react");function n(){return(n=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var t,r=function(e,n){return function(t){return Math.max(e,Math.min(t,n))}},u=function(e){return e},o=function(){},a=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce((function(e,n){return function(){return e(n.apply(void 0,arguments))}}))},i=function(e,n){return function(t){return null==t?e():n(t)}},c=i((function(){return{left:0,top:0}}),a((function(e){var n=e[0],t=e[1];return{left:t.left+n.offsetLeft,top:t.top+n.offsetTop}}),(t=function(e){return c(e.offsetParent)},function(e){return[e[0],t(e[1])]}),(function(e){return[e,e]}))),f=a((function(e){var n=e.left,t=e.top;return function(e,r){return{x:e-n,y:r-t}}}),c),s=function(n){var t=e.useRef(n);return[e.useCallback((function(){return t.current}),[]),e.useCallback((function(e){return t.current="function"==typeof e?e(t.current):e,t.current}),[])]};module.exports=function(t){var a,c=t.enablePan,l=void 0===c||c,v=t.enableZoom,d=void 0===v||v,p=t.requireCtrlToZoom,m=void 0!==p&&p,y=t.panOnDrag,g=void 0===y||y,x=t.preventClickOnPan,h=void 0===x||x,b=t.zoomSensitivity,C=void 0===b?.01:b,E=t.scrollPanSensitivity,k=void 0===E?1:E,L=t.minZoom,P=void 0===L?0:L,z=t.maxZoom,M=void 0===z?Infinity:z,Y=t.minX,X=void 0===Y?-Infinity:Y,w=t.maxX,O=void 0===w?Infinity:w,Z=t.minY,D=void 0===Z?-Infinity:Z,S=t.maxY,T=void 0===S?Infinity:S,I=t.initialZoom,R=void 0===I?1:I,j=t.initialPan,H=void 0===j?{x:0,y:0}:j,q=t.onPanStart,W=void 0===q?o:q,A=t.onPan,K=void 0===A?o:A,U=t.onPanEnd,B=void 0===U?o:U,F=t.onZoom,G=void 0===F?o:F,J=e.useRef(null),N=(a=e.useState(Object.create(null))[1],e.useCallback((function(){a(Object.create(null))}),[a])),Q=e.useRef(!1),V=e.useRef([]),$=e.useRef(1),_=s({top:0,left:0}),ee=_[0],ne=_[1],te=s(!1),re=te[0],ue=te[1],oe=s(n({},H,{zoom:R})),ae=oe[0],ie=oe[1],ce=e.useCallback(r(X,O),[X,O]),fe=e.useCallback(r(D,T),[D,T]),se=e.useCallback(r(P,M),[P,M]),le=e.useCallback((function(e){var n=ie(e),t=ae(),r=t.zoom;return ne({top:(J.current.offsetHeight/2-t.y)/r,left:(J.current.offsetWidth/2-t.x)/r}),N(),n}),[]),ve=e.useCallback((function(e){return le((function(n){var t=n.zoom,r="function"==typeof e?e({x:n.x,y:n.y}):e;return{x:ce(r.x),y:fe(r.y),zoom:t}}))}),[X,O,D,T]),de=e.useCallback((function(e,n){return le((function(t){var r=t.x,o=t.y,a=t.zoom,c=se("function"==typeof e?e(a):e),f=i((function(){return{x:J.current.offsetWidth/2,y:J.current.offsetHeight/2}}),u)(n);return{x:ce(r+(f.x-r)*(a-c)/a),y:fe(o+(f.y-o)*(a-c)/a),zoom:c}}))}),[X,O,D,T,P,M]),pe=e.useCallback((function(e){l&&(V.current=e,ue(!0),W(e))}),[l,W]),me=e.useCallback((function(e){if(re()){Q.current=!0;var n=V.current;V.current=e,ve((function(t){for(var r=t.x,u=t.y,o=0,a=0,i=Math.min(e.length,n.length),c=0;c<i;c++)o+=e[c].x-n[c].x,a+=e[c].y-n[c].y;return{x:r+o/i,y:u+a/i}})),K(e)}}),[re,K,X,O,D,T]),ye=e.useCallback((function(){re()&&(ue(!1),B())}),[B]),ge=e.useCallback((function(e){Q.current&&(Q.current=!1,e.stopPropagation())}),[h]),xe=e.useCallback((function(e){if(d&&J.current)if(e.preventDefault(),!m||e.ctrlKey){var n=e.pageX,t=e.pageY,r=e.deltaY,u=f(J.current)(n,t);de((function(e){return e*Math.pow(1-C,r)}),u),G()}else{var o=e.deltaX,a=e.deltaY;ve((function(e){return{x:e.x-o,y:e.y-a}}))}}),[d,G,X,O,D,T,P,M,k,ve]),he=e.useCallback((function(e){e.preventDefault(),$.current=ae().zoom}),[]),be=e.useCallback((function(e){e.preventDefault();var n=e.pageX,t=e.pageY,r=e.scale,u=getPositionOnElement(J.current)(n,t);de($.current*r,u),G()}),[]),Ce=e.useCallback((function(e){if(e)e.addEventListener("wheel",xe),e.addEventListener("gesturestart",he),e.addEventListener("gesturechange",be),e.addEventListener("gestureend",be);else if(J.current)return function(){J.current.removeEventListener("wheel",xe),J.current.removeEventListener("gesturestart",he),J.current.removeEventListener("gesturechange",be),J.current.removeEventListener("gestureend",be)};J.current=e}),[]);e.useEffect((function(){if(J.current)return J.current.addEventListener("wheel",xe),J.current.addEventListener("gesturestart",he),J.current.addEventListener("gesturechange",be),J.current.addEventListener("gestureend",be),function(){J.current.removeEventListener("wheel",xe),J.current.removeEventListener("gesturestart",he),J.current.removeEventListener("gesturechange",be),J.current.removeEventListener("gestureend",be)}}),[]);var Ee=ae();return{container:J,setContainer:Ce,transformStyle:"translate3D("+Ee.x+"px, "+Ee.y+"px, 0) scale("+Ee.zoom+")",transform:Ee,center:ee(),pan:{x:Ee.x,y:Ee.y},zoom:Ee.zoom,setPan:ve,setZoom:de,panZoomHandlers:g?{onTouchStart:function(e){return pe([].concat(e.touches).map((function(e){return{x:e.pageX,y:e.pageY}})))},onTouchMove:function(e){return me([].concat(e.touches).map((function(e){return{x:e.pageX,y:e.pageY}})))},onTouchEnd:function(){return ye()},onTouchCancel:function(){return ye()},onMouseDown:function(e){return pe([{x:e.pageX,y:e.pageY}])},onMouseMove:function(e){return me([{x:e.pageX,y:e.pageY}])},onMouseUp:function(){return ye()},onMouseLeave:function(){return ye()},onClickCapture:ge}:{}}};
//# sourceMappingURL=index.js.map
